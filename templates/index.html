<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Find Your Next…</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles/style.css') }}">

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
</head>
<body>
  <header>
    <h1>Find Your Next…</h1>
    <p>Book or Movie — Discover stories you'll love!</p>
  </header>

  <main class="wrap">
    <section class="card">
      <h2 class="search-head">What are you looking for?</h2>

      <form class="search-form" action="/recommend" method="get" novalidate>

        <!-- I'm entering -->
        <div class="field">
          <label for="inputKind">I'm entering</label>
          <select id="inputKind" name="inputKind">
            <option value="movie">Movie</option>
            <option value="book">Book</option>
          </select>
        </div>
      
        <!-- Recommend me -->
        <div class="field">
          <label for="targetKind">Recommend me</label>
          <select id="targetKind" name="targetKind">
            <option value="book">Books</option>
            <option value="movie" selected>Movies</option>
          </select>
        </div>
      
        <!-- Title -->
        <div class="field">
          <label for="q">Title</label>
          <input id="q" name="q" type="text" placeholder="Enter your favorite title…" required />
        </div>
      
        <!-- How many -->
        <div class="field">
          <label for="limit">Show</label>
          <select id="limit" name="limit">
            <option value="3">3</option>
            <option value="4" selected>4</option>
            <option value="9">9</option>
            <option value="12">12</option>
          </select>
        </div>
      
        <!-- GENRE DROPDOW` N (hidden unless Book -> Movies) -->
        <div class="field" id="genreField" style="display:none;">
          <label for="genre">Genre / Subject</label>
          <select id="genre" name="genre">
            <option value="">Select a Genre</option>
            <option value="action">Action</option>
            <option value="adventure">Adventure</option>
            <option value="anthropology">Anthropology</option>
            <option value="astronomy">Astronomy</option>
            <option value="archaeology">Archaeology</option>
            <option value="architecture">Architecture</option>
            <option value="art">Art</option>
            <option value="aviation">Aviation</option>
            <option value="biography">Biography</option>
            <option value="biology">Biology</option>
            <option value="business">Business</option>
            <option value="chemistry">Chemistry</option>
            <option value="children">Children</option>
            <option value="classics">Classics</option>
            <option value="contemporary">Contemporary</option>
            <option value="cookbook">Cookbook</option>
            <option value="crafts">Crafts</option>
            <option value="crime">Crime</option>
            <option value="dystopia">Dystopia</option>
            <option value="economics">Economics</option>
            <option value="education">Education</option>
            <option value="engineering">Engineering</option>
            <option value="environment">Environment</option>
            <option value="erotica">Erotica</option>
            <option value="essay">Essay</option>
            <option value="fairy tales">Fairy Tales</option>
            <option value="fantasy">Fantasy</option>
            <option value="fashion">Fashion</option>
            <option value="feminism">Feminism</option>
            <option value="fiction">Fiction</option>
            <option value="finance">Finance</option>
            <option value="folklore">Folklore</option>
            <option value="food">Food</option>
            <option value="gaming">Gaming</option>
            <option value="gardening">Gardening</option>
            <option value="geography">Geography</option>
            <option value="geology">Geology</option>
            <option value="graphic novel">Graphic Novel</option>
            <option value="health">Health</option>
            <option value="historical">Historical</option>
            <option value="historical fiction">Historical Fiction</option>
            <option value="history">History</option>
            <option value="horror">Horror</option>
            <option value="how to">How To</option>
            <option value="humor">Humor</option>
            <option value="inspirational">Inspirational</option>
            <option value="journalism">Journalism</option>
            <option value="law">Law</option>
            <option value="literary fiction">Literary Fiction</option>
            <option value="literature">Literature</option>
            <option value="magical realism">Magical Realism</option>
            <option value="manga">Manga</option>
            <option value="martial arts">Martial Arts</option>
            <option value="mathematics">Mathematics</option>
            <option value="medicine">Medicine</option>
            <option value="medieval">Medieval</option>
            <option value="memoir">Memoir</option>
            <option value="mystery">Mystery</option>
            <option value="mythology">Mythology</option>
            <option value="nature">Nature</option>
            <option value="nonfiction">Nonfiction</option>
            <option value="novel">Novel</option>
            <option value="occult">Occult</option>
            <option value="paranormal">Paranormal</option>
            <option value="parenting">Parenting</option>
            <option value="philosophy">Philosophy</option>
            <option value="physics">Physics</option>
            <option value="picture book">Picture Book</option>
            <option value="poetry">Poetry</option>
            <option value="politics">Politics</option>
            <option value="programming">Programming</option>
            <option value="psychology">Psychology</option>
            <option value="reference">Reference</option>
            <option value="relationships">Relationships</option>
            <option value="religion">Religion</option>
            <option value="romance">Romance</option>
            <option value="science and technology">Science and Technology</option>
            <option value="science fiction">Science Fiction</option>
            <option value="self help">Self Help</option>
            <option value="short stories">Short Stories</option>
            <option value="society">Society</option>
            <option value="sociology">Sociology</option>
            <option value="space">Space</option>
            <option value="spirituality">Spirituality</option>
            <option value="sports">Sports</option>
            <option value="text book">Text Book</option>
            <option value="thriller">Thriller</option>
            <option value="travel">Travel</option>
            <option value="true crime">True Crime</option>
            <option value="war">War</option>
            <option value="writing">Writing</option>
            <option value="young adult">Young Adult</option>
          </select>
        </div>
      
        <!-- Submit -->
        <button class="btn" type="submit">Search</button>
      </form>
      

      <p class="micro">
        Tip: Try entering <em>Interstellar</em>, <em>Dune:Part Two</em>, <em>La La Land</em>, or <em>Spider-Man: No Way Home</em> to see how the site behaves.
      </p>
    </section>
  </main>

  <!-- Featured movies -->
<section class="featured">
    <div class="card">
      <h2>Featured Movies</h2>
      
      <div class="featured-grid">
        {% if featured_movies %}
          {% for m in featured_movies %}
            <a class="movie-card" href="#">
              <img src="{{ m.poster }}" alt="{{ m.title }}" onerror="this.src='/static/images/image-not-available.jpg'">
              <h3>{{ m.title }}</h3>
              <p>
                {{ m.kind }} • {{ m.year }}<br>
                Rating: {{ m.rating }}
              </p>
            </a>
          {% endfor %}
        {% else %}
          <p>Unable to load popular movies right now.</p>
        {% endif %}
      </div>
      
    </div>
  </section>

  <footer>© 2025 Find Your Next…</footer>

<script>
    // Only keep the UI logic for the dropdowns
    const inputKind = document.getElementById('inputKind');
    const targetKind = document.getElementById('targetKind');
    const q = document.getElementById('q');
    const genreField = document.getElementById('genreField');
    const genreSelect = document.getElementById('genre');

    function refreshUI() {
      const entering = inputKind.value;
      const recommending = targetKind.value;
      const isBookToMovie = entering === 'book' && recommending === 'movie';

      q.placeholder = entering === 'book' ? 'e.g., The Hobbit' : 'e.g., Interstellar';

      if (isBookToMovie) {
        genreField.style.display = 'block';
      } else {
        genreField.style.display = 'none';
        genreSelect.value = '';
      }
    }

    inputKind.addEventListener('change', refreshUI);
    targetKind.addEventListener('change', refreshUI);

    // Run once on load
    document.addEventListener('DOMContentLoaded', refreshUI);
  </script>
